{"remainingRequest":"D:\\UCA\\TechnosWeb\\tp3\\node_modules\\babel-loader\\lib\\index.js!D:\\UCA\\TechnosWeb\\tp3\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\UCA\\TechnosWeb\\tp3\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\UCA\\TechnosWeb\\tp3\\src\\components\\ListeRestaurants.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\UCA\\TechnosWeb\\tp3\\src\\components\\ListeRestaurants.vue","mtime":1633420428804},{"path":"D:\\UCA\\TechnosWeb\\tp3\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\UCA\\TechnosWeb\\tp3\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\UCA\\TechnosWeb\\tp3\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\UCA\\TechnosWeb\\tp3\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBfIGZyb20gImxvZGFzaCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTGlzdGVSZXN0YXVyYW50cycsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJlc3RhdXJhbnRzOiBbXSwKICAgICAgbm9tOiAnJywKICAgICAgY3Vpc2luZTogJycsCiAgICAgIG5vbWJyZVJlc3RhdXJhbnRzVG90YWw6IDAsCiAgICAgIHBhZ2U6IDAsCiAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgbmJyZVBhZ2VzVG90YWw6IDAsCiAgICAgIG1zZzogJycsCiAgICAgIG5vbVJlc3RvUmVjaGVyY2hlcjogJycKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXRSZXN0YXVyYW50c0Zyb21TZXJ2ZXIoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHBhZ2VQcmVjZWRlbnRlOiBmdW5jdGlvbiBwYWdlUHJlY2VkZW50ZSgpIHsKICAgICAgaWYgKHRoaXMucGFnZSA9PSAwKSByZXR1cm47CiAgICAgIHRoaXMucGFnZS0tOwogICAgICB0aGlzLmdldFJlc3RhdXJhbnRzRnJvbVNlcnZlcigpOwogICAgfSwKICAgIHBhZ2VTdWl2YW50ZTogZnVuY3Rpb24gcGFnZVN1aXZhbnRlKCkgewogICAgICBpZiAodGhpcy5wYWdlID09PSB0aGlzLmRlcm5pZXJlUGFnZSkgcmV0dXJuOwogICAgICB0aGlzLnBhZ2UrKzsKICAgICAgdGhpcy5nZXRSZXN0YXVyYW50c0Zyb21TZXJ2ZXIoKTsKICAgIH0sCiAgICBnZXRSZXN0YXVyYW50c0Zyb21TZXJ2ZXI6IGZ1bmN0aW9uIGdldFJlc3RhdXJhbnRzRnJvbVNlcnZlcigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciB1cmwgPSAiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FwaS9yZXN0YXVyYW50cz8iOwogICAgICB1cmwgKz0gInBhZ2U9IiArIHRoaXMucGFnZTsKICAgICAgdXJsICs9ICImcGFnZXNpemU9IiArIHRoaXMucGFnZVNpemU7CiAgICAgIHVybCArPSAiJm5hbWU9IiArIHRoaXMubm9tUmVzdG9SZWNoZXJjaGVyOwogICAgICBmZXRjaCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlSlNPTikgewogICAgICAgIC8vYXJvdyBmb25jdGlvbiBjb25zZXJ2ZSBsZSBib24gInRoaXMiLgogICAgICAgIHJlc3BvbnNlSlNPTi5qc29uKCkudGhlbihmdW5jdGlvbiAocmVzSnMpIHsKICAgICAgICAgIC8vIE1haW50ZW5hbnQgcmVzSnMgZXN0IHVuIHZyYWkgb2JqZXQgSmF2YVNjcmlwdAogICAgICAgICAgX3RoaXMucmVzdGF1cmFudHMgPSByZXNKcy5kYXRhOwogICAgICAgICAgX3RoaXMubm9tYnJlUmVzdGF1cmFudHNUb3RhbCA9IHJlc0pzLmNvdW50OwogICAgICAgICAgX3RoaXMubmJyZVBhZ2VzVG90YWwgPSBNYXRoLnJvdW5kKF90aGlzLm5vbWJyZVJlc3RhdXJhbnRzVG90YWwgLyBfdGhpcy5wYWdlU2l6ZSk7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICBjaGVyY2hlclJlc3RvOiBfLmRlYm91bmNlKGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5nZXRSZXN0YXVyYW50c0Zyb21TZXJ2ZXIoKTsKICAgIH0sIDEwMDApLAogICAgc3VwcHJpbWVyUmVzdGF1cmFudDogZnVuY3Rpb24gc3VwcHJpbWVyUmVzdGF1cmFudChyKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIHVybCA9ICJodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL3Jlc3RhdXJhbnRzLyIgKyByLl9pZDsKICAgICAgZmV0Y2godXJsLCB7CiAgICAgICAgbWV0aG9kOiAiREVMRVRFIgogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZUpTT04pIHsKICAgICAgICByZXNwb25zZUpTT04uanNvbigpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgLy8gTWFpbnRlbmFudCByZXMgZXN0IHVuIHZyYWkgb2JqZXQgSmF2YVNjcmlwdAogICAgICAgICAgY29uc29sZS5sb2cocmVzLm1zZyk7CiAgICAgICAgICBfdGhpczIubXNnID0gcmVzLm1zZzsgLy9PbiByYWZmcmFpY2hpdCBsYSB2dWUKCiAgICAgICAgICBfdGhpczIuZ2V0UmVzdGF1cmFudHNGcm9tU2VydmVyKCk7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICBham91dGVyUmVzdGF1cmFudDogZnVuY3Rpb24gYWpvdXRlclJlc3RhdXJhbnQoZXZlbnQpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICAvLyBSw6ljdXDDqXJhdGlvbiBkdSBmb3JtdWxhaXJlLiBQYXMgYmVzb2luIGRlIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IKICAgICAgLy8gb3UgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgcHVpc3F1ZSBjJ2VzdCBsZSBmb3JtdWxhaXJlIHF1aSBhIGfDqW7DqXLDqQogICAgICAvLyBsJ8OpdsOpbmVtZW50CiAgICAgIHZhciBmb3JtID0gZXZlbnQudGFyZ2V0OyAvLyBSw6ljdXDDqXJhdGlvbiBkZXMgdmFsZXVycyBkZXMgY2hhbXBzIGR1IGZvcm11bGFpcmUKICAgICAgLy8gZW4gcHLDqXZpc2lvbiBkJ3VuIGVudm9pIG11bHRpcGFydCBlbiBhamF4L2ZldGNoCgogICAgICB2YXIgZG9ubmVlc0Zvcm11bGFpcmUgPSBuZXcgRm9ybURhdGEoZm9ybSk7CiAgICAgIHZhciB1cmwgPSAiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FwaS9yZXN0YXVyYW50cyI7CiAgICAgIGZldGNoKHVybCwgewogICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgIGJvZHk6IGRvbm5lZXNGb3JtdWxhaXJlCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlSlNPTikgewogICAgICAgIHJlc3BvbnNlSlNPTi5qc29uKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAvLyBNYWludGVuYW50IHJlcyBlc3QgdW4gdnJhaSBvYmpldCBKYXZhU2NyaXB0CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMubXNnKTsKICAgICAgICAgIF90aGlzMy5tc2cgPSByZXMubXNnOyAvL09uIHJhZmZyYWljaGl0IGxhIHZ1ZQoKICAgICAgICAgIF90aGlzMy5nZXRSZXN0YXVyYW50c0Zyb21TZXJ2ZXIoKTsKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgICB0aGlzLm5vbSA9ICIiOwogICAgICB0aGlzLmN1aXNpbmUgPSAiIjsKICAgIH0sCiAgICBnZXRDb2xvcjogZnVuY3Rpb24gZ2V0Q29sb3IoaW5kZXgpIHsKICAgICAgcmV0dXJuIGluZGV4ICUgMiA/ICdsaWdodEJsdWUnIDogJ3BpbmsnOwogICAgfQogIH0KfTs="},{"version":3,"sources":["ListeRestaurants.vue"],"names":[],"mappings":"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","sourcesContent":["\r\n<template>\r\n  <div >\r\n      <table>\r\n        <tr>\r\n            <th>Nom</th>\r\n            <th>Cuisine </th>\r\n        </tr>\r\n        <tbody>\r\n            <tr \r\n                v-for=\"{r,index } in restaurants\" \r\n                :key=\"index\"\r\n                v-on:click=\"supprimerRestaurant(r)\"\r\n                v-bind:style=\"{backgroundColor:getColor(index)}\" \r\n                v-bind:class=\"{bordureRouge:(index === 2)}\"\r\n            >\r\n                <td></td>\r\n                <td> {{r.cuisine}}</td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport _ from \"lodash\";\r\nexport default {\r\n  name: 'ListeRestaurants',\r\n  data: function(){\r\n      return {\r\n            restaurants: [],\r\n            nom: '',\r\n            cuisine: '',\r\n            nombreRestaurantsTotal: 0,\r\n            page: 0,\r\n            pageSize: 10,\r\n            nbrePagesTotal: 0,\r\n            msg: '',\r\n            nomRestoRechercher: ''\r\n        }\r\n    },\r\n        mounted() {\r\n            this.getRestaurantsFromServer();\r\n        }\r\n        ,\r\n        methods: {\r\n            pagePrecedente() {\r\n                if (this.page == 0) return;\r\n\r\n                this.page--;\r\n                this.getRestaurantsFromServer();\r\n            },\r\n            pageSuivante() {\r\n                if (this.page === this.dernierePage) return;\r\n                this.page++;\r\n                this.getRestaurantsFromServer();\r\n            },\r\n            getRestaurantsFromServer() {\r\n                let url = \"http://localhost:8080/api/restaurants?\";\r\n                url += \"page=\" + this.page;\r\n                url += \"&pagesize=\" + this.pageSize;\r\n                url += \"&name=\" + this.nomRestoRechercher;\r\n\r\n                fetch(url)\r\n                    .then((responseJSON) => {//arow fonction conserve le bon \"this\".\r\n                        responseJSON.json()\r\n                            .then((resJs) => {\r\n                                // Maintenant resJs est un vrai objet JavaScript\r\n                                this.restaurants = resJs.data;\r\n                                this.nombreRestaurantsTotal = resJs.count;\r\n                                this.nbrePagesTotal = Math.round(this.nombreRestaurantsTotal / this.pageSize);\r\n                            });\r\n                    })\r\n                    .catch((err) => {\r\n                        console.log(err);\r\n                    });\r\n            },\r\n            chercherResto:\r\n                _.debounce(function () {\r\n                    this.getRestaurantsFromServer();\r\n                }, 1000),\r\n            supprimerRestaurant(r) {\r\n                let url = \"http://localhost:8080/api/restaurants/\" + r._id;\r\n                \r\n                fetch(url, {\r\n                    method: \"DELETE\",\r\n                    \r\n                })\r\n                    .then((responseJSON) => {\r\n                        responseJSON.json()\r\n                            .then((res) => {\r\n                                // Maintenant res est un vrai objet JavaScript\r\n                                console.log(res.msg);\r\n                                this.msg = res.msg;\r\n\r\n                                //On raffraichit la vue\r\n                                this.getRestaurantsFromServer();\r\n                            });\r\n                    })\r\n                    .catch(function (err) {\r\n                        console.log(err);\r\n                    });\r\n            },\r\n            ajouterRestaurant(event) {\r\n                // Récupération du formulaire. Pas besoin de document.querySelector\r\n                // ou document.getElementById puisque c'est le formulaire qui a généré\r\n                // l'événement\r\n                let form = event.target;\r\n\r\n                // Récupération des valeurs des champs du formulaire\r\n                // en prévision d'un envoi multipart en ajax/fetch\r\n                let donneesFormulaire = new FormData(form);\r\n\r\n                let url = \"http://localhost:8080/api/restaurants\";\r\n\r\n                fetch(url, {\r\n                    method: \"POST\",\r\n                    body: donneesFormulaire\r\n                })\r\n                    .then((responseJSON) => {\r\n                        responseJSON.json()\r\n                            .then((res) => {\r\n                                // Maintenant res est un vrai objet JavaScript\r\n                                console.log(res.msg);\r\n                                this.msg = res.msg;\r\n\r\n                                //On raffraichit la vue\r\n                                this.getRestaurantsFromServer();\r\n                            });\r\n                    })\r\n                    .catch(function (err) {\r\n                        console.log(err);\r\n                    });\r\n                this.nom = \"\";\r\n                this.cuisine = \"\";\r\n            },\r\n            getColor(index) {\r\n                return (index % 2) ? 'lightBlue' : 'pink';\r\n            }\r\n        }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\nh1{\r\n    color: blue;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components"}]}