{"remainingRequest":"D:\\UCA\\TechnosWeb\\tp3\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\UCA\\TechnosWeb\\tp3\\src\\components\\ListeRestaurants.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\UCA\\TechnosWeb\\tp3\\src\\components\\ListeRestaurants.vue","mtime":1633419192809},{"path":"D:\\UCA\\TechnosWeb\\tp3\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\UCA\\TechnosWeb\\tp3\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\UCA\\TechnosWeb\\tp3\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\UCA\\TechnosWeb\\tp3\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdMaXN0ZVJlc3RhdXJhbnRzJywNCiAgcHJvcHM6IHsNCiAgICBtc2c6IFN0cmluZw0KICB9LA0KICBkYXRhOiBmdW5jdGlvbigpew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIHJlc3RhdXJhbnRzOiBbXSwNCiAgICAgICAgICAgIG5vbTogJycsDQogICAgICAgICAgICBjdWlzaW5lOiAnJywNCiAgICAgICAgICAgIG5vbWJyZVJlc3RhdXJhbnRzVG90YWw6IDAsDQogICAgICAgICAgICBwYWdlOiAwLA0KICAgICAgICAgICAgcGFnZVNpemU6IDEwLA0KICAgICAgICAgICAgbmJyZVBhZ2VzVG90YWw6IDAsDQogICAgICAgICAgICBtc2c6ICcnLA0KICAgICAgICAgICAgbm9tUmVzdG9SZWNoZXJjaGVyOiAnJw0KICAgICAgICB9DQogICAgfSwNCiAgICAgICAgbW91bnRlZCgpIHsNCiAgICAgICAgICAgIHRoaXMuZ2V0UmVzdGF1cmFudHNGcm9tU2VydmVyKCk7DQogICAgICAgIH0NCiAgICAgICAgLA0KICAgICAgICBtZXRob2RzOiB7DQogICAgICAgICAgICBwYWdlUHJlY2VkZW50ZSgpIHsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYWdlID09IDApIHJldHVybjsNCg0KICAgICAgICAgICAgICAgIHRoaXMucGFnZS0tOw0KICAgICAgICAgICAgICAgIHRoaXMuZ2V0UmVzdGF1cmFudHNGcm9tU2VydmVyKCk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgcGFnZVN1aXZhbnRlKCkgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhZ2UgPT09IHRoaXMuZGVybmllcmVQYWdlKSByZXR1cm47DQogICAgICAgICAgICAgICAgdGhpcy5wYWdlKys7DQogICAgICAgICAgICAgICAgdGhpcy5nZXRSZXN0YXVyYW50c0Zyb21TZXJ2ZXIoKTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBnZXRSZXN0YXVyYW50c0Zyb21TZXJ2ZXIoKSB7DQogICAgICAgICAgICAgICAgbGV0IHVybCA9ICJodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL3Jlc3RhdXJhbnRzPyI7DQogICAgICAgICAgICAgICAgdXJsICs9ICJwYWdlPSIgKyB0aGlzLnBhZ2U7DQogICAgICAgICAgICAgICAgdXJsICs9ICImcGFnZXNpemU9IiArIHRoaXMucGFnZVNpemU7DQogICAgICAgICAgICAgICAgdXJsICs9ICImbmFtZT0iICsgdGhpcy5ub21SZXN0b1JlY2hlcmNoZXI7DQoNCiAgICAgICAgICAgICAgICBmZXRjaCh1cmwpDQogICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZUpTT04pID0+IHsvL2Fyb3cgZm9uY3Rpb24gY29uc2VydmUgbGUgYm9uICJ0aGlzIi4NCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSlNPTi5qc29uKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzSnMpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFpbnRlbmFudCByZXNKcyBlc3QgdW4gdnJhaSBvYmpldCBKYXZhU2NyaXB0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdGF1cmFudHMgPSByZXNKcy5kYXRhOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vbWJyZVJlc3RhdXJhbnRzVG90YWwgPSByZXNKcy5jb3VudDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYnJlUGFnZXNUb3RhbCA9IE1hdGgucm91bmQodGhpcy5ub21icmVSZXN0YXVyYW50c1RvdGFsIC8gdGhpcy5wYWdlU2l6ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBjaGVyY2hlclJlc3RvOg0KICAgICAgICAgICAgICAgIF8uZGVib3VuY2UoZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFJlc3RhdXJhbnRzRnJvbVNlcnZlcigpOw0KICAgICAgICAgICAgICAgIH0sIDEwMDApLA0KICAgICAgICAgICAgc3VwcHJpbWVyUmVzdGF1cmFudChyKSB7DQogICAgICAgICAgICAgICAgbGV0IHVybCA9ICJodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL3Jlc3RhdXJhbnRzLyIgKyByLl9pZDsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBmZXRjaCh1cmwsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiREVMRVRFIiwNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlSlNPTikgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VKU09OLmpzb24oKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFpbnRlbmFudCByZXMgZXN0IHVuIHZyYWkgb2JqZXQgSmF2YVNjcmlwdA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMubXNnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tc2cgPSByZXMubXNnOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vT24gcmFmZnJhaWNoaXQgbGEgdnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0UmVzdGF1cmFudHNGcm9tU2VydmVyKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBham91dGVyUmVzdGF1cmFudChldmVudCkgew0KICAgICAgICAgICAgICAgIC8vIFLDqWN1cMOpcmF0aW9uIGR1IGZvcm11bGFpcmUuIFBhcyBiZXNvaW4gZGUgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcg0KICAgICAgICAgICAgICAgIC8vIG91IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkIHB1aXNxdWUgYydlc3QgbGUgZm9ybXVsYWlyZSBxdWkgYSBnw6luw6lyw6kNCiAgICAgICAgICAgICAgICAvLyBsJ8OpdsOpbmVtZW50DQogICAgICAgICAgICAgICAgbGV0IGZvcm0gPSBldmVudC50YXJnZXQ7DQoNCiAgICAgICAgICAgICAgICAvLyBSw6ljdXDDqXJhdGlvbiBkZXMgdmFsZXVycyBkZXMgY2hhbXBzIGR1IGZvcm11bGFpcmUNCiAgICAgICAgICAgICAgICAvLyBlbiBwcsOpdmlzaW9uIGQndW4gZW52b2kgbXVsdGlwYXJ0IGVuIGFqYXgvZmV0Y2gNCiAgICAgICAgICAgICAgICBsZXQgZG9ubmVlc0Zvcm11bGFpcmUgPSBuZXcgRm9ybURhdGEoZm9ybSk7DQoNCiAgICAgICAgICAgICAgICBsZXQgdXJsID0gImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hcGkvcmVzdGF1cmFudHMiOw0KDQogICAgICAgICAgICAgICAgZmV0Y2godXJsLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLA0KICAgICAgICAgICAgICAgICAgICBib2R5OiBkb25uZWVzRm9ybXVsYWlyZQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZUpTT04pID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSlNPTi5qc29uKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1haW50ZW5hbnQgcmVzIGVzdCB1biB2cmFpIG9iamV0IEphdmFTY3JpcHQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLm1zZyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubXNnID0gcmVzLm1zZzsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL09uIHJhZmZyYWljaGl0IGxhIHZ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFJlc3RhdXJhbnRzRnJvbVNlcnZlcigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgdGhpcy5ub20gPSAiIjsNCiAgICAgICAgICAgICAgICB0aGlzLmN1aXNpbmUgPSAiIjsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBnZXRDb2xvcihpbmRleCkgew0KICAgICAgICAgICAgICAgIHJldHVybiAoaW5kZXggJSAyKSA/ICdsaWdodEJsdWUnIDogJ3BpbmsnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQp9DQo="},{"version":3,"sources":["ListeRestaurants.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ListeRestaurants.vue","sourceRoot":"src/components","sourcesContent":["\r\n<template>\r\n  <div >\r\n      <table>\r\n        <tr>\r\n            <th>Nom</th>\r\n            <th>Cuisine </th>\r\n        </tr>\r\n        <tbody>\r\n            <tr \r\n                v-for=\"{r,index } in restaurants\" \r\n                :key=\"index\"\r\n                v-on:click=\"supprimerRestaurant(r)\"\r\n                v-bind:style=\"{backgroundColor:getColor(index)}\" \r\n                v-bind:class=\"{bordureRouge:(index === 2)}\"\r\n            >\r\n                <td>{{r.name}}</td>\r\n                <td> {{r.cuisine}}</td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ListeRestaurants',\r\n  props: {\r\n    msg: String\r\n  },\r\n  data: function(){\r\n      return {\r\n            restaurants: [],\r\n            nom: '',\r\n            cuisine: '',\r\n            nombreRestaurantsTotal: 0,\r\n            page: 0,\r\n            pageSize: 10,\r\n            nbrePagesTotal: 0,\r\n            msg: '',\r\n            nomRestoRechercher: ''\r\n        }\r\n    },\r\n        mounted() {\r\n            this.getRestaurantsFromServer();\r\n        }\r\n        ,\r\n        methods: {\r\n            pagePrecedente() {\r\n                if (this.page == 0) return;\r\n\r\n                this.page--;\r\n                this.getRestaurantsFromServer();\r\n            },\r\n            pageSuivante() {\r\n                if (this.page === this.dernierePage) return;\r\n                this.page++;\r\n                this.getRestaurantsFromServer();\r\n            },\r\n            getRestaurantsFromServer() {\r\n                let url = \"http://localhost:8080/api/restaurants?\";\r\n                url += \"page=\" + this.page;\r\n                url += \"&pagesize=\" + this.pageSize;\r\n                url += \"&name=\" + this.nomRestoRechercher;\r\n\r\n                fetch(url)\r\n                    .then((responseJSON) => {//arow fonction conserve le bon \"this\".\r\n                        responseJSON.json()\r\n                            .then((resJs) => {\r\n                                // Maintenant resJs est un vrai objet JavaScript\r\n                                this.restaurants = resJs.data;\r\n                                this.nombreRestaurantsTotal = resJs.count;\r\n                                this.nbrePagesTotal = Math.round(this.nombreRestaurantsTotal / this.pageSize);\r\n                            });\r\n                    })\r\n                    .catch((err) => {\r\n                        console.log(err);\r\n                    });\r\n            },\r\n            chercherResto:\r\n                _.debounce(function () {\r\n                    this.getRestaurantsFromServer();\r\n                }, 1000),\r\n            supprimerRestaurant(r) {\r\n                let url = \"http://localhost:8080/api/restaurants/\" + r._id;\r\n                \r\n                fetch(url, {\r\n                    method: \"DELETE\",\r\n                    \r\n                })\r\n                    .then((responseJSON) => {\r\n                        responseJSON.json()\r\n                            .then((res) => {\r\n                                // Maintenant res est un vrai objet JavaScript\r\n                                console.log(res.msg);\r\n                                this.msg = res.msg;\r\n\r\n                                //On raffraichit la vue\r\n                                this.getRestaurantsFromServer();\r\n                            });\r\n                    })\r\n                    .catch(function (err) {\r\n                        console.log(err);\r\n                    });\r\n            },\r\n            ajouterRestaurant(event) {\r\n                // Récupération du formulaire. Pas besoin de document.querySelector\r\n                // ou document.getElementById puisque c'est le formulaire qui a généré\r\n                // l'événement\r\n                let form = event.target;\r\n\r\n                // Récupération des valeurs des champs du formulaire\r\n                // en prévision d'un envoi multipart en ajax/fetch\r\n                let donneesFormulaire = new FormData(form);\r\n\r\n                let url = \"http://localhost:8080/api/restaurants\";\r\n\r\n                fetch(url, {\r\n                    method: \"POST\",\r\n                    body: donneesFormulaire\r\n                })\r\n                    .then((responseJSON) => {\r\n                        responseJSON.json()\r\n                            .then((res) => {\r\n                                // Maintenant res est un vrai objet JavaScript\r\n                                console.log(res.msg);\r\n                                this.msg = res.msg;\r\n\r\n                                //On raffraichit la vue\r\n                                this.getRestaurantsFromServer();\r\n                            });\r\n                    })\r\n                    .catch(function (err) {\r\n                        console.log(err);\r\n                    });\r\n                this.nom = \"\";\r\n                this.cuisine = \"\";\r\n            },\r\n            getColor(index) {\r\n                return (index % 2) ? 'lightBlue' : 'pink';\r\n            }\r\n        }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\nh1{\r\n    color: blue;\r\n}\r\n</style>\r\n"]}]}